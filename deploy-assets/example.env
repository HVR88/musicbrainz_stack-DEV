# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
#
#   You must set MUSICBRAINZ_REPLICATION_TOKEN below
#
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# REQUIRED SETTING - go to https://metabrainz.org/profile
MUSICBRAINZ_REPLICATION_TOKEN=

# New installs should use the limbo_ prefix. Existing installs can keep mbms_plus
# - in this case, comment-out the project name below in your .env file
# You can migrate old installs to new name with admin/upgrade-volumes script
#
COMPOSE_PROJECT_NAME=limbo

MUSICBRAINZ_WEB_SERVER_HOST=localhost
MUSICBRAINZ_WEB_SERVER_PORT=5000
LIMBO_PORT=5001

# Edit the timezone to see times relative to your location
TZ=America/Toronto

# Provider keys for Limbo (recommended if you use external providers)
FANART_KEY=
TADB_KEY=2
LASTFM_KEY=
LASTFM_SECRET=
SPOTIFY_ID=
SPOTIFY_SECRET=
SPOTIFY_REDIRECT_URL=http://HOST_IP:5001

# ===============================================================================
#
# Intermediate settings (optional)
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

#-------------------------------------------------------------
# Optional extension hooks (run after built-in processing)
# LIMBO_DB_HOOK_AFTER_MODULE=
# LIMBO_DB_HOOK_AFTER_PATH=
# LIMBO_MITM_AFTER_MODULE=
# LIMBO_MITM_AFTER_PATH=


# - - - - - - - - - -
# Network type: bridge | macvlan | ipvlan
MUSICBRAINZ_NETWORK_TYPE=bridge
LIDARR_METADATA_CONFIG=BRIDGE
# Required for macvlan/ipvlan
MUSICBRAINZ_NETWORK_PARENT=
MUSICBRAINZ_NETWORK_SUBNET=
MUSICBRAINZ_NETWORK_GATEWAY=
# Optional for macvlan/ipvlan
MUSICBRAINZ_NETWORK_IP_RANGE=
# Optional: static IP for musicbrainz on macvlan/ipvlan (others stay on bridge)
MUSICBRAINZ_NETWORK_IP=
# Optional: static LAN IP for limbo when macvlan/ipvlan is enabled
LIMBO_NETWORK_IP=
# Optional for ipvlan: l2 or l3
MUSICBRAINZ_IPVLAN_MODE=
# - - - - - - - - - -

MUSICBRAINZ_SERVER_PROCESSES=10

MUSICBRAINZ_REPLICATION_ENABLED=true
MUSICBRAINZ_REPLICATION_TIME=03:00

MUSICBRAINZ_INDEXING_ENABLED=true
MUSICBRAINZ_INDEXING_TIME=01:00
MUSICBRAINZ_INDEXING_DAY=Sunday
MUSICBRAINZ_INDEXING_FREQUENCY=weekly

POSTGRES_SHARED_BUFFERS=4GB
POSTGRES_SHM_SIZE=4GB
SOLR_HEAP=4g

MB_DB_HOST=db
MB_DB_PORT=5432
MB_DB_USER=musicbrainz
MB_DB_PASSWORD=musicbrainz
MB_DB_NAME=musicbrainz_db

LIMBO_CACHE_DB=lm_cache_db
LIMBO_CACHE_USER=lidarr
LIMBO_CACHE_PASSWORD=lidarr
LIMBO_CACHE_HOST=db
LIMBO_CACHE_PORT=5432
# - - - - - - - - - -

REDIS_HOST=redis
REDIS_PORT=6379

SOLR_URL=http://search:8983/solr


# ===============================================================================
#
# ADVANCED - you shouldn't need to modify anything below
# - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

# Required for MusicBrainz Mirror CSS to render correctly
STATIC_RESOURCES_LOCATION=/static/build


MUSICBRAINZ_BASE_DOWNLOAD_URL=https://data.metabrainz.org/pub/musicbrainz
MUSICBRAINZ_BASE_FTP_URL=
MUSICBRAINZ_CAA_BASE_URL=

MUSICBRAINZ_BOOTSTRAP_DB=1
MUSICBRAINZ_BOOTSTRAP_FETCH_DUMPS=1
MUSICBRAINZ_BOOTSTRAP_MATERIALIZED=1
MUSICBRAINZ_BOOTSTRAP_SEARCH_INDEXES=download
MUSICBRAINZ_BOOTSTRAP_SOLR_CLEANUP=0

# Optional: overrides MUSICBRAINZ_REPLICATION_TIME when set (cron format)
MUSICBRAINZ_REPLICATION_SCHEDULE=

MUSICBRAINZ_SERVER_VERSION=v-2026-01-19.0
MUSICBRAINZ_BUILD_SEQUENCE=1
POSTGRES_VERSION=16
MB_SOLR_VERSION=4.1.0

MUSICBRAINZ_BOOTSTRAP_WGET_OPTIONS=
MUSICBRAINZ_BOOTSTRAP_DB_MARKER=/media/dbdump/.bootstrap.db.done
MUSICBRAINZ_BOOTSTRAP_MATERIALIZED_MARKER=/media/dbdump/.bootstrap.materialized.done
MUSICBRAINZ_BOOTSTRAP_SEARCH_MARKER=/var/cache/musicbrainz/solr-backups/.bootstrap.solr.done
MUSICBRAINZ_BOOTSTRAP_MARKER=/media/dbdump/.bootstrap.done
MUSICBRAINZ_BOOTSTRAP_WAIT_FOR_DB=1

# DON'T EDIT
ROOT_PATH=
USE_CACHE=true
PRODUCTION=false
ENABLE_STATS=false
DEBUG=false

## Limbo Image
LIMBO_IMAGE=espressomatic/limbo-bridge:latest

# MBMS Admin Listener (internal control API)
# Keep MBMS_ADMIN_KEY in sync with LIMBO_APIKEY if using Limbo.
MBMS_ADMIN_ENABLED=true
MBMS_ADMIN_KEY=limbo-2026-cptbvfe7aq
MBMS_ADMIN_HOST=0.0.0.0
MBMS_ADMIN_PORT=8099
MBMS_ADMIN_HEADER=X-MBMS-Key
MBMS_ADMIN_NOTIFY_URL=http://limbo:5001/replication/notify
MBMS_ADMIN_NOTIFY_HEADER=X-MBMS-Key
MBMS_ADMIN_NOTIFY_KEY=limbo-2026-cptbvfe7aq
MBMS_ADMIN_NOTIFY_TIMEOUT=5
MBMS_ADMIN_LOCK=/tmp/replication.pid
MBMS_ADMIN_REPL_SCRIPT=/usr/local/bin/replication.sh

# ===============================================================================
# DO NOT EDIT THESE LINES: managed by Limbo deploy workflow
LIMBO_APIKEY=limbo-2026-cptbvfe7aq
# ===============================================================================
